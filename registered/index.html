<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>註冊</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="captcha-mini.js"></script>
<script src="sha512.js"></script>

</head>
<body>

<center><h1>註冊</h1></center>

<div class="box">
<div class="form">
  <input type="text" id="user" name="name" autocomplete= "off" required>
  <label class="label-hoshi" for="name"><span class="content-hoshi">
    使用者名稱
    </span></label>
</div>
</div>

<div class="box">
<div class="form">
  <input type="password" id="password" name="number" autocomplete= "off" required>
  <label class="label-hoshi" for="name"><span class="content-hoshi">
    密碼
    </span></label>
</div>
</div>

<div class="box">
<canvas width="180" height="75" id="captcha1"></canvas>
</div>
<div class="box">

<div class="form">
  <input type="text" id="valwww" name="number" autocomplete= "off" required>
  <label class="label-hoshi" id="valwwww" for="name"><span class="content-hoshi">
    驗證碼
    </span></label>
</div>
</div>
<span id="out"></span>
<center>
<a href="javascript:submit()" class="signin">註冊</a>
</center>
<script>
var far = '' ;
let captcha1 = new CaptchaMini({
        content: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()_+?><{}[]',  //验证码内容
        length: 8,
    });
    captcha1.draw(document.querySelector('#captcha1'), r => {
    console.log(r, 'e');
    far = r ;
    });
    
    function submit() {
    var valww = document.querySelector('#valwww').value ;
    if (valww === far) {
    $('#valwwww').css({'border-bottom-color':'#f08b8b'});
    var user = document.querySelector('#user').value ;
    var password = document.querySelector('#password').value ;
    var keyA = sha512(sha512(user + password + user + sha512(user))) ;
    document.querySelector('#out').innerHTML = keyA ;
    }
    else {
     $('#valwwww').css({'border-bottom-color':'#f08b8b'});
    }
    }
</script>

</body>
</html>
